{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\n// جلب البيانات من السيرفر\nexport const fetchProduct = createAsyncThunk('product/fetchProduct', async (_, thunkAPI) => {\n  try {\n    const response = await fetch(\"http://localhost:3005/product\");\n    const data = await response.json(); // تحويل response إلى JSON\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nexport const fetchUsers = createAsyncThunk('product/fetchUsers', async (_, thunkAPI) => {\n  try {\n    const response = await fetch(\"http://localhost:3005/user\");\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.log(error);\n  }\n});\nconst ProductSlice = createSlice({\n  name: \"product\",\n  initialState: {\n    products: [],\n    filteredProducts: [],\n    cart: [],\n    users: [],\n    login: false\n  },\n  reducers: {\n    dataFilter: (state, action) => {\n      if (action.payload === \"All\") {\n        state.filteredProducts = state.products;\n      } else {\n        if (state.products) {\n          state.filteredProducts = state.products.filter(el => el.category === action.payload);\n        }\n      }\n    },\n    addToCart: (state, action) => {\n      const product = state.products.find(el => el.id === action.payload);\n      if (product) {\n        const exist = state.cart.find(el => el.id === product.id);\n        if (exist) {\n          exist.quantity += 1;\n        } else {\n          state.cart.push({\n            ...product,\n            quantity: 1\n          });\n        }\n      }\n    },\n    incrementQty: (state, action) => {\n      const item = state.cart.find(el => el.id === action.payload);\n      if (item) item.quantity += 1;\n    },\n    decrementQty: (state, action) => {\n      const item = state.cart.find(el => el.id === action.payload);\n      if (item && item.quantity > 1) item.quantity -= 1;\n    },\n    addUser: (state, action) => {\n      state.users.push(action.payload);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchProduct.pending, state => {\n      console.log(\"pending\");\n    }).addCase(fetchProduct.fulfilled, (state, action) => {\n      state.products = action.payload;\n      state.filteredProducts = action.payload;\n      console.log(\"fullfiled\");\n    }).addCase(fetchProduct.rejected, (state, action) => {}).addCase(fetchUsers.pending, (state, action) => {\n      console.log(\"pending\");\n    }).addCase(fetchUsers.fulfilled, (state, action) => {\n      state.users = action.payload;\n      console.log(\"fullfiled\");\n    }).addCase(fetchUsers.rejected, (state, action) => {\n      console.log(\"rejected\");\n    });\n  }\n});\nexport const {\n  dataFilter,\n  addToCart,\n  incrementQty,\n  decrementQty,\n  addUser\n} = ProductSlice.actions;\nexport default ProductSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","fetchProduct","_","thunkAPI","response","fetch","data","json","error","console","log","fetchUsers","ProductSlice","name","initialState","products","filteredProducts","cart","users","login","reducers","dataFilter","state","action","payload","filter","el","category","addToCart","product","find","id","exist","quantity","push","incrementQty","item","decrementQty","addUser","extraReducers","builder","addCase","pending","fulfilled","rejected","actions","reducer"],"sources":["D:/React training/react-todo-app-main - Copy/src/store/ProductSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n// جلب البيانات من السيرفر\r\nexport const fetchProduct = createAsyncThunk('product/fetchProduct', async (_, thunkAPI) => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:3005/product\");\r\n      const data = await response.json(); // تحويل response إلى JSON\r\n      return data;\r\n      \r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n);\r\nexport const fetchUsers = createAsyncThunk('product/fetchUsers', async (_, thunkAPI) => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:3005/user\");\r\n      const data = await response.json();\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n);\r\n\r\nconst ProductSlice = createSlice({\r\n  name: \"product\",\r\n  initialState: {\r\n    products: [],\r\n    filteredProducts: [],\r\n    cart: [],\r\n    users:[],\r\n    login:false,\r\n  },\r\n  reducers: {\r\n    dataFilter: (state, action) => {\r\n      if (action.payload === \"All\") {\r\n        state.filteredProducts = state.products;\r\n      } else {\r\n        if(state.products){\r\n          state.filteredProducts = state.products.filter(\r\n          (el) => el.category === action.payload\r\n        );\r\n        }\r\n      }\r\n    },\r\n    addToCart: (state, action) => {\r\n      const product = state.products.find(el => el.id === action.payload);\r\n      if (product) {\r\n        const exist = state.cart.find(el => el.id === product.id);\r\n        if (exist) {\r\n          exist.quantity += 1;\r\n        } else {\r\n          state.cart.push({ ...product, quantity: 1 });\r\n        }\r\n      }\r\n    },\r\n    incrementQty: (state, action) => {\r\n      const item = state.cart.find(el => el.id === action.payload);\r\n      if (item) item.quantity += 1;\r\n    },\r\n    decrementQty: (state, action) => {\r\n      const item = state.cart.find(el => el.id === action.payload);\r\n      if (item && item.quantity > 1) item.quantity -= 1;\r\n    },\r\n    addUser:(state,action)=>{\r\n      state.users.push(action.payload)\r\n    }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchProduct.pending, (state) => {\r\n        console.log(\"pending\")\r\n      })\r\n      .addCase(fetchProduct.fulfilled, (state, action) => {\r\n        state.products = action.payload;\r\n        state.filteredProducts = action.payload;\r\n        console.log(\"fullfiled\")\r\n      })\r\n      .addCase(fetchProduct.rejected, (state, action) => {\r\n      })\r\n      .addCase(fetchUsers.pending, (state, action) => {\r\n        console.log(\"pending\")\r\n      })\r\n      .addCase(fetchUsers.fulfilled, (state, action) => {\r\n        state.users = action.payload;\r\n        console.log(\"fullfiled\")\r\n\r\n      })\r\n      .addCase(fetchUsers.rejected, (state, action) => {\r\n        console.log(\"rejected\")\r\n      })\r\n  }\r\n});\r\n\r\nexport const { dataFilter, addToCart, incrementQty, decrementQty,addUser } = ProductSlice.actions;\r\nexport default ProductSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}